---
title: "Subsetting basics"
author: "Akis"
date: "17/01/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Subsetting objects in R

A number of operators can be used to extract subsets of R objects:

* [] - returns an object of the same class as the original (can be used to select more than one element with one exception...)

For example if you subset a vector you will get back a vector. Subset a list and you will get a list.

```{r}
#Extract the first element of object x
x <- c("a", "b", "c", "d", "e")
x[1]

#Extract the first 3 elements of object x
x[1:3]
```



* [[]] - extracts elements of a list or data frame (can only be used to extract a single element but the returned object will not necessarily be a list or data frame)

Remember lists can hold objects of different classes.

* $ - extracts elements of a list or data frame by name

# Subsetting lists

One of the reasons to use names for objects is to make reference to different elements of the object by name. 

```{r}
x <- list(foo = 1:4, bar = 0.6)
# Extract the first element of the list x
# Use single brackets
x[1]

# Use dollar sign
x$foo

# Use double brackets
x[[1]]
```

foo is the first element and it is a sequence from 1 to 4, and bar is the second element and it is a number.
Using the single brackets we got the list that contained the sequence 1 to 4. By using the dollar sign and the double brackets we just got the sequence. That is their difference.

## Extracting multiple elements of a list
To extract multiple elements from a list we need to use the single bracket operator.

```{r}
x <- list(foo = 1:4, bar = 0.6, baz = "hello")
# Extract the first and last element of the above list
x[c(1,3)]
```

You cannot use double brackets or the dollar sign operator to extract multiple elements.

# Subsetting matrices


```{r}
x <- matrix(1:6, 2, 3)
x[1,2] #first row, second column

# indices can also be missing
x[1, ] # prints first row
x[, 2] # prints second column

```

When a single element of a matrix is retrieved, it is returned as a vector of length 1 rather than a 1 x 1 matrix. This behavior can be turned off by setting `drop = FALSE`.

```{r}
x <- matrix(1:6, 2, 3)
x[1,2, drop = FALSE]
```
This gave us back a 1 x 1 matrix with the element 3 in it. An example with missing indices:

```{r}
x <- matrix(1:6, 2, 3)
x[1, , drop = F]
```

# Subsetting with names - Partial Matching

A partial match occurs if the whole of the element of x matches the beginning of the element of table. Finally, all remaining elements of x are regarded as unmatched.

Partial matching of names is allowed with `[[]]` and `$`.

```{r}
x <- list(aardvark = 1:5)
x$a
x[["a"]]
```
The `$` looks for a name in this list that matches the letter a. In this case we only have one element and (aardvark) and it returns the associated sequence (1:5).

The double bracket operator expects that the name you pass it is going to be an exact match for one of the names in the list. By default, the `[[]]` does not do partial matching. In the above list we get a NULL value because there is no element in the list that has the name a. However, if we pass a second argument (`exact = FALSE`) we can make the search more flexible:

```{r}
x <- list(aardvark = 1:5)
x[["a", exact = FALSE]]
```

